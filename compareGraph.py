import plotly as py
import plotly.graph_objs as go
import numpy as np

algData = {
  "Tabular Q": [24.04, 35.31,         29.43,         33.45,         31.07,         31.32,         37.15,         36.27,         38.1,         34.62,         41.11,         34.9,         36.09,         37.14,         43.13,         41.48,         38.05,         40.17,         46.54,         46.25,         45.16,         41.65,         36.57,         37.25,         47.26,         38.79,         50.93,         41.05,         41.46,         48.21],
  "Q Network": [8.7, 9.0, 7.966666666666667, 7.275, 9.52, 9.666666666666666, 11.871428571428572, 13.15, 13.022222222222222, 12.54, 12.654545454545454, 12.625, 13.215384615384615, 13.457142857142857, 13.946666666666667, 19.95625, 19.82941176470588, 20.266666666666666, 19.694736842105264, 19.685, 19.952380952380953, 19.990909090909092, 19.734782608695653, 19.6125, 19.06, 18.734615384615385, 18.72222222222222, 18.935714285714287, 19.53103448275862, 19.55666666666667, 19.741935483870968, 20.284375, 20.272727272727273, 20.2, 19.85142857142857, 20.041666666666668, 20.083783783783783, 19.88157894736842, 19.505128205128205, 19.33, 19.24878048780488, 19.257142857142856, 19.248837209302327, 19.286363636363635, 19.133333333333333, 18.967391304347824, 18.880851063829788, 18.895833333333332, 19.397959183673468, 19.232, 19.307843137254903, 19.60576923076923, 19.61320754716981, 19.653703703703705, 19.483636363636364, 19.317857142857143, 19.217543859649123, 19.136206896551723, 19.132203389830508, 19.126666666666665, 19.14426229508197, 19.011290322580646, 19.20952380952381, 19.0671875, 18.995384615384616, 18.993939393939392, 18.871641791044777, 19.023529411764706, 19.043478260869566, 18.96, 18.953521126760563, 18.84027777777778, 18.783561643835615, 18.67297297297297, 18.493333333333332, 18.29342105263158, 18.47012987012987, 18.434615384615384, 18.473417721518988, 18.43125, 18.418518518518518, 18.308536585365854, 18.251807228915663, 18.20952380952381, 18.18235294117647, 18.134883720930233, 18.158620689655173, 18.605681818181818, 18.65505617977528, 18.607777777777777, 18.58681318681319, 18.997826086956522, 19.0494623655914, 19.04787234042553, 19.013684210526314, 18.90625, 18.87216494845361, 18.945918367346938, 18.816161616161615, 18.694, 18.59108910891089, 18.451960784313727, 18.375728155339807, 18.327884615384615, 18.28952380952381, 18.266981132075472, 18.23177570093458, 18.196296296296296, 18.091743119266056, 17.997272727272726, 17.895495495495496, 17.864285714285714, 17.897345132743364, 17.821052631578947, 17.718260869565217, 17.606896551724137, 17.493162393162393, 17.413559322033898, 17.396638655462183, 17.470833333333335, 17.436363636363637, 17.485245901639345, 17.483739837398375, 17.43225806451613, 17.3784, 17.636507936507936, 17.578740157480315, 17.6546875, 17.634883720930233, 17.60076923076923, 17.634351145038167, 17.58560606060606, 17.66842105263158, 17.669402985074626, 17.631851851851852, 17.623529411764707, 17.67883211678832, 17.911594202898552, 17.89640287769784, 17.855, 17.95035460992908, 17.885915492957746, 17.862937062937064, 17.85902777777778, 17.841379310344827, 17.80068493150685, 17.743537414965985, 17.864864864864863, 17.78993288590604, 17.713333333333335, 17.67152317880795, 17.592763157894737, 17.505228758169935, 17.43051948051948, 17.35290322580645, 17.26025641025641, 17.24203821656051, 17.20126582278481, 17.12578616352201, 17.0825, 17.06645962732919, 17.053703703703704, 17.001840490797544, 16.978048780487804, 16.943636363636365, 16.953614457831325, 16.941916167664672, 17.05297619047619, 17.00414201183432, 16.991764705882353, 16.963742690058478, 16.992441860465117, 16.95664739884393, 16.933333333333334, 16.99657142857143, 17.157954545454544, 17.129378531073446, 17.198314606741572, 17.134078212290504, 17.093888888888888, 17.099447513812155, 17.08186813186813, 17.029508196721313, 17.047826086956523, 17.033513513513512, 17.11236559139785, 17.08288770053476, 17.04787234042553, 16.998412698412697, 16.934736842105263, 16.934031413612566, 16.9828125, 17.021243523316063, 17.043298969072165, 17.011282051282052, 17.119897959183675, 17.18020304568528, 17.14040404040404, 17.113065326633166, 17.1555, 17.112437810945273, 17.247524752475247, 17.27192118226601, 17.252450980392158, 17.270731707317072, 17.25485436893204, 17.19710144927536, 17.140865384615385, 17.09377990430622, 17.066666666666666, 17.009004739336493, 16.991509433962264, 16.93755868544601, 16.92336448598131, 17.031162790697675, 17.0, 16.94101382488479, 16.911009174311925, 16.90593607305936, 16.970454545454544, 16.992760180995475, 17.07927927927928, 17.047982062780267, 17.05982142857143, 17.08577777777778, 17.055309734513273, 17.034361233480176, 16.986842105263158, 16.962008733624454, 16.922608695652173, 16.953679653679654, 17.010775862068964, 16.975536480686696, 17.055982905982905, 17.048510638297873, 17.025, 17.014345991561182, 17.071008403361343, 17.33012552301255, 17.35625, 17.395435684647303, 17.373553719008264, 17.336213991769547, 17.456147540983608, 17.48, 17.452439024390245, 17.41417004048583, 17.368951612903224, 17.450602409638556, 17.4388, 17.438645418326693, 17.418253968253968, 17.38893280632411, 17.384645669291338, 17.398039215686275, 17.358984375, 17.387937743190662, 17.349612403100775, 17.32702702702703, 17.29769230769231, 17.381226053639846, 17.364503816793892, 17.385171102661598, 17.376136363636363, 17.385283018867923, 17.340601503759398, 17.306741573033708, 17.529850746268657, 17.56728624535316, 17.611851851851853, 17.653874538745388, 17.788970588235294, 17.793406593406594, 17.754744525547444, 17.718545454545456, 17.71086956521739, 17.755595667870036, 17.731654676258994, 17.685663082437276, 17.65142857142857, 17.691103202846975, 17.65354609929078, 17.62367491166078, 17.597535211267605, 17.61859649122807, 17.625174825174824, 17.68850174216028, 17.742708333333333, 17.696539792387544, 17.66689655172414, 17.650515463917525, 17.617123287671234, 17.593515358361774, 17.55442176870748, 17.55627118644068, 17.568918918918918, 17.602020202020203, 17.57718120805369, 17.567224080267557, 17.55, 17.55],
  "DQN": [25.44, 37.77, 30.65, 45.16, 51.4, 59.5, 53.99, 70.91, 54.1, 52.62, 61.93, 73.41, 74.73, 56.11, 71.09, 82.93, 60.82, 56.33, 37.92, 58.51, 69.44, 73.1, 75.78, 56.31, 78.61, 76.68, 83.66, 71.12, 73.55, 81.71],
  "Policy Gradient": [12.0, 6.9900000000000002, 7.9199999999999999, 8.7400000000000002, 9.1899999999999995, 15.119999999999999, 46.039999999999999, 186.41, 274.00999999999999, 327.60000000000002, 309.63, 268.94, 165.71000000000001, 350.56, 334.52999999999997, 342.02999999999997, 401.27999999999997, 435.54000000000002, 372.94999999999999, 398.80000000000001, 383.29000000000002, 453.13, 446.70999999999998, 448.62, 425.31, 401.30000000000001, 411.0, 493.37, 490.57999999999998, 424.44999999999999]
}

class CompareGraph:
    def __init__(self, tSteps):
        self.xarray = np.array(tSteps)
        self.data = algData
        self.layout = go.Layout(
            title='Learning algorithm comparison',
            xaxis=dict(
                title='Number of games played',
                titlefont=dict(
                    size=18,
                    color='#7f7f7f'
                )
            ),
            yaxis=dict(
                title='Average score per game',
                titlefont=dict(
                    size=18,
                    color='#7f7f7f'
                )
            )
        )

    def plot(self):
        py.tools.set_credentials_file(username='nicolepilsworth', api_key='RIr45yea9BGg46iuh29e')
        plotData = []

        # Code used from https://plot.ly/python/line-charts/#new-to-plotly
        for k in self.data:
          plotData.append(go.Scatter(
            name=k,
            x = self.xarray,
            y = self.data[k]
          ))

        fig = go.Figure(data=plotData, layout=self.layout)

        py.plotly.plot(fig, filename='basic-line')
        print("Lines plotted")
